<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer</title>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
        }
        .pdf-container {
            flex-grow: 1;
            background-color: #f9f6f2;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        #pdfViewer {
            width: 100%;
            height: 100%;
        }
        .back-button {
            margin: 10px;
            padding: 10px;
            background-color: #ffffff;
            color: #333;
            text-decoration: none;
            border-radius: 25px;
            font-size: 16px;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            text-align: center;
        }
        .back-button:hover {
            background-color: #f0f0f0;
            border-color: #ccc;
        }
    </style>
    <!-- Include the PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
</head>
<body>
    <div class="pdf-container">
        <canvas id="pdfViewer"></canvas>
    </div>
    <button class="back-button" onclick="window.history.back()">Back</button>
    <script>
        const params = new URLSearchParams(window.location.search);
        const file = params.get('file');
        const pdfViewer = document.getElementById('pdfViewer');

        if (file) {
            const loadingTask = pdfjsLib.getDocument(file);
            loadingTask.promise.then(pdf => {
                console.log('PDF loaded');
                pdf.getPage(1).then(page => {
                    const viewport = page.getViewport({ scale: 1 });
                    const context = pdfViewer.getContext('2d');
                    pdfViewer.height = viewport.height;
                    pdfViewer.width = viewport.width;

                    const renderContext = {
                        canvasContext: context,
                        viewport: viewport
                    };
                    page.render(renderContext);
                });
            }).catch(error => {
                console.error('Error loading PDF: ' + error);
            });
        } else {
            document.body.innerHTML = '<p>No PDF file specified.</p>';
        }
    </script>
</body>
</html>
